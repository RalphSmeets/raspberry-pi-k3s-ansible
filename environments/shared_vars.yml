---
## devops labels
platform_daily_support_devops_labels:
  team: "devops_tools_team"
  chat_to: "{{ universe.name | upper }}"
  deployer: "devops_team"
  support-level: "24x7"

platform_office_hour_support_devops_labels:
  team: "devops_tools_team"
  chat_to: "{{ universe.environment | upper }}"
  deployer: "devops_team"
  support-level: "8x5"

git_clone_ssh_url: "git@github.com"
git_clone_https_url: "https://github.com"

oidc_provider_name: "{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['name'] }}"
oidc_provider_host: "{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['host'] }}"
oidc_provider_uri: "{{ oidc_provider_host }}"
oidc_provider_url: "https://{{ oidc_provider_uri }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['url'] }}"
oidc_provider_auth_url: "{{ oidc_provider_url }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['auth_url'] }}"
oidc_provider_token_url: "{{ oidc_provider_url }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['token_url'] }}"
oidc_provider_userinfo_url: "{{ oidc_provider_url }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['userinfo_url'] }}"
oidc_provider_keys_url: "{{ oidc_provider_url }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['keys_url'] }}"
oidc_provider_well_known_config_url: "{{ oidc_provider_url }}/{{ lookup('community.hashi_vault.vault_kv2_get', '{{universe.environment }}/group_vars/oidc/provider/nas', **vault_options )['secret']['well_known_config_url'] }}"

vault_options:
  engine_mount_point: 'k8s-provisioning'
  url: 'https://vault.k8s-frambozen.nl'
  auth_method: "token"

docker_repo_configs:
  - name: "ralphsmeets"
    password: "{{ lookup('community.hashi_vault.vault_kv2_get', 'docker/ralphsmeets', **vault_options )['secret']['password'] }}"
    user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'docker/ralphsmeets', **vault_options )['secret']['user'] }}"
    dockerconfigjson: "{{ lookup('community.hashi_vault.vault_kv2_get', 'docker/ralphsmeets', **vault_options )['secret']['configjson'] | b64encode }}"

ingress_tls:
  prod:
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: "websecure"
      traefik.ingress.kubernetes.io/router.tls: "true"
      kubernetes.io/ingress.class: "traefik"
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    tls_secretname_postfix: "-tls-prod-cert"
  staging:
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: "websecure"
      traefik.ingress.kubernetes.io/router.tls: "true"
      kubernetes.io/ingress.class: "traefik"
      cert-manager.io/cluster-issuer: "letsencrypt-staging"
    tls_secretname_postfix: "tls-staging-cert"